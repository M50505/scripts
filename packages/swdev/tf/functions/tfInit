#!/usr/bin/env bash
# vim:tabstop=2:shiftwidth=2:nu:filetype=sh
#	
# Author:              Martin Cribbins
# Revision history:
#
# 2024-10-20 - Initial version.
#	


#[[ -n ${input} ]] && exec 0<${input}
#[[ -n ${output} ]] && exec 1>${output}

tfInit ()
{
	_doc ${1} 20241020102132 "New function, no functionality yet. " && return 0
	
	local terraformRC="${HOME}/.terraformrc"

	if [[ -f ${TERRAFORM_CONFIGS_IMPORT_FILE} ]]
	then
		token=$(jq ".fields[]| select(.label==\"LoginToken\").value" "${TERRAFORM_CONFIGS_IMPORT_FILE}")

		cat <<EOF > "${terraformRC}"
credentials "app.terraform.io" {
  token = ${token}
}
EOF

	else
		error Could not locate the ${TERRAFORM_CONFIGS_IMPORT_FILE} file
	fi
}
